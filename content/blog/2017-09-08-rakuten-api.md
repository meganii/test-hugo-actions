---
title: "楽天APIの調査結果"
date: 2017-09-08T16:36:29+09:00
lastmod: 2017-09-08T16:36:29+09:00
comments: true
category: ['Tech']
tags: ['API','楽天']
published: true
slug: rakuten-api
img: "https://res.cloudinary.com/meganii/image/upload/c_scale,f_auto,q_auto,w_300/v1514031264/thumbnail_tech.png"
---

ASINからJANコードを引っ張れないかと、楽天APIを調べたときのメモです。


<!--more-->
{{% googleadsense %}}

## 楽天市場系API

2017/9/8現在、楽天市場のAPIには以下のものが存在する。

- 楽天商品検索API (version:2017-07-06)
- 商品価格ナビ製品検索API(version:2017-04-26)
- 楽天ジャンル検索API (version:2014-02-22)
- 楽天タグ検索API (version:2014-02-22)
- 楽天商品ランキングAPI (version:2017-06-28)


その中で、純粋な商品検索につかえそうなのは、以下２つ。

- 楽天商品検索API (version:2017-07-06)
- 商品価格ナビ製品検索API(version:2017-04-26)

それぞれ何が違うのでしょうか？

### 楽天商品検索API (version:2017-07-06)

> 楽天商品検索APIは、楽天市場の商品（共同購入商品・オークション商品・フリマ商品・楽天オークション の個人間オークション商品は除く。）の情報を取得することが可能なAPIです。デベロッパーはキーワードでの商品検索をはじめ、ショップ別・ジャンル別の 絞込み検索も可能となります。
> 過去の楽天商品検索APIにはなかった、タグIDでの検索が可能になりました。
> タグに関する詳細な説明は、Q&Aや楽天ウェブサービスのブログにて記載します。
> 
> https://webservice.rakuten.co.jp/api/ichibaitemsearch/


### 商品価格ナビ製品検索API(version:2017-04-26)

> 商品価格ナビ製品検索APIは、キーワードやジャンルによって商品価格ナビ内の製品を検索することが可能なAPIです。
> 旧バージョンのプロダクト製品検索API、プロダクト製品詳細API、プロダクトジャンル情報APIの機能を実装しています。
> 
> [https://webservice.rakuten.co.jp/api/productsearch/](https://webservice.rakuten.co.jp/api/productsearch/)

JANコードを指定して検索する口は用意されていないみたいだが、どちらのAPIも`keyword`にJANコードを指定して検索すればヒットしそう。

しかし、`keyword`にJANコードを入れての検索結果は、楽天商品検索API (version:2017-07-06)と商品価格ナビ製品検索API(version:2017-04-26)で異なっており、商品価格ナビ製品検索API(version:2017-04-26)でないと取得できないものがあった。

説明文を見る限り、この商品価格ナビ製品検索API(version:2017-04-26)は、元々プロダクト検索のAPIだったみたいなので、純粋に製品情報を取得したかったらこのAPIを使うのがよさそうである。



## 楽天市場におけるJANコード(カタログID?)

商品によっては、JANコードが未登録のものがある。

JANコードが登録されているものは`itemCaption`に埋め込まれている。JANコード:4997837531073 など、記載フォーマットは決められていなさそうである。

```
"itemCaption": "品番：97837-53107JANコード:4997837531073詳細はメーカーのWEBページでご確認下さい。97837-53107【在庫表示に関するお願い】 在庫表示は日々更新しておりますが、流動的な在庫になりますので【△残1個】や【△在庫少】の表示などの場合購入のタイミングで欠品になる可能性もございます。そのような場合は何卒、ご了承下さいませ。※在庫ありの商品は当日15時頃までの注文分は翌営業日に出荷可能となります。※当日出荷には対応致しておりませんので予めご了承下さい。※発送業務の混雑状況により記載納期を多少前後する場合がございます。予めご了承下さい。",
```

JANコードが登録必須のジャンルは、参考URLの情報によると以下の通り。

- 100026    パソコン・周辺機器
- 101240    CD・DVD・楽器
- 101164    おもちゃ・ホビー・ゲーム
- 562637    家電
- 564500    スマートフォン・タブレット

http://giniland.com/2017年5月16日（火）から%E3%80%80楽天「カタログid」登録必須/
